<!--views/layouts/layout.ejs-->
<!DOCTYPE html>
<html lang="en">
<%- include("../partials/head") %>

<body>
    <div id="wrapper">
        <div class="container">
        <%- include("../partials/header") %>
        <%- include("../partials/navigation") %>
        
        <!-- Render flash messages once, globally -->
        <div class="flash-messages">
        <%- messages() %>
        </div>
        
        <main>
            <%- body %>
        </main>

        <%- include("../partials/footer") %>
        </div>
    </div>

    <!-- site JS -->
    <!-- expose current user id (for client logic) -->
<script>
  // safe JSON-encoded user id (null if not logged in)
  window.CURRENT_USER_ID = <%- JSON.stringify((typeof accountData !== 'undefined' && accountData && accountData.account_id) ? accountData.account_id : null) %>;
</script>

    <!-- socket.io client (auto-served by socket.io server) -->
    <script src="/socket.io/socket.io.js"></script>
    <!-- small chat client to handle incoming_message etc. -->
    <script src="/js/chat.js"></script>
    <script src="/js/messages.js"></script>


    <script src="/js/script.js"></script>
</body>
</html>
