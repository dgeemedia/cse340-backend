<!-- views/messages/inbox.ejs -->
<div class="container">
  <h1>Inbox</h1>
  <table class="card" style="width:100%; border-collapse:collapse;">
    <thead>
      <tr><th>From</th><th>Subject</th><th>Date</th><th>Read</th><th>Actions</th></tr>
    </thead>
    <tbody>
      <% inbox.forEach(m => { %>
        <tr style="<%= m.is_read ? '' : 'font-weight:700' %>">
          <td><%= m.sender_first || 'System' %></td>
          <td><a href="/account/messages/view/<%= m.message_id %>"><%= m.subject || '(no subject)' %></a></td>
          <td><%= new Date(m.created_at).toLocaleString() %></td>
          <td><input type="checkbox" class="mark-read" data-id="<%= m.message_id %>" <%= m.is_read ? 'checked' : '' %>></td>
          <td>
            <form action="/account/messages/delete" method="post" style="display:inline">
              <input type="hidden" name="message_id" value="<%= m.message_id %>">
              <button class="btn">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>

<script src="/js/messages.js"></script>

